<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç”Ÿæ´»ç®¡ç†ç³»ç»Ÿ - v2.4 æœ€ç»ˆä¿®å¤ç‰ˆ</title>
    
    <!-- ç¦ç”¨æ‰€æœ‰ç¼“å­˜ -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    
    <style>
    /* å®Œå…¨å†…è”çš„CSS - æ— å¤–éƒ¨ä¾èµ– */
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        color: white;
        padding: 20px;
        line-height: 1.6;
    }

    .container {
        max-width: 1200px;
        margin: 0 auto;
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
        border-radius: 20px;
        padding: 30px;
        box-shadow: 0 8px 32px rgba(31, 38, 135, 0.37);
        border: 1px solid rgba(255, 255, 255, 0.18);
    }

    .header {
        text-align: center;
        margin-bottom: 40px;
        padding-bottom: 20px;
        border-bottom: 1px solid rgba(255, 255, 255, 0.2);
    }

    .header h1 {
        font-size: 2.5rem;
        margin-bottom: 10px;
        background: linear-gradient(45deg, #fff, #f0f8ff);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    .header p {
        font-size: 1.1rem;
        opacity: 0.9;
    }

    .stats {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
    }

    .stat-card {
        background: rgba(255, 255, 255, 0.15);
        padding: 20px;
        border-radius: 15px;
        text-align: center;
        border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .stat-number {
        font-size: 2rem;
        font-weight: bold;
        margin-bottom: 5px;
    }

    .stat-label {
        font-size: 0.9rem;
        opacity: 0.8;
    }

    .section {
        background: rgba(255, 255, 255, 0.05);
        border-radius: 15px;
        padding: 25px;
        margin-bottom: 25px;
        border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .section-title {
        font-size: 1.3rem;
        margin-bottom: 20px;
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .input-group {
        margin-bottom: 20px;
    }

    .input-group label {
        display: block;
        margin-bottom: 8px;
        font-weight: 500;
    }

    textarea, input[type="text"] {
        width: 100%;
        padding: 15px;
        border: 1px solid rgba(255, 255, 255, 0.3);
        border-radius: 10px;
        background: rgba(255, 255, 255, 0.1);
        color: white;
        font-size: 1rem;
        resize: vertical;
        font-family: inherit;
    }

    textarea::placeholder, input::placeholder {
        color: rgba(255, 255, 255, 0.7);
    }

    .button-group {
        display: flex;
        gap: 15px;
        flex-wrap: wrap;
        margin-top: 20px;
    }

    .btn {
        padding: 12px 25px;
        border: none;
        border-radius: 25px;
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        gap: 8px;
        text-decoration: none;
        color: white;
    }

    .btn-primary {
        background: linear-gradient(45deg, #667eea, #764ba2);
        box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
    }

    .btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(102, 126, 234, 0.6);
    }

    .btn-success {
        background: linear-gradient(45deg, #4CAF50, #45a049);
        box-shadow: 0 4px 15px rgba(76, 175, 80, 0.4);
    }

    .btn-success:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(76, 175, 80, 0.6);
    }

    .btn-danger {
        background: linear-gradient(45deg, #f44336, #d32f2f);
        box-shadow: 0 4px 15px rgba(244, 67, 54, 0.4);
    }

    .btn-danger:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(244, 67, 54, 0.6);
    }

    .btn-secondary {
        background: linear-gradient(45deg, #6c757d, #5a6268);
        box-shadow: 0 4px 15px rgba(108, 117, 125, 0.4);
    }

    .task-list {
        display: flex;
        flex-direction: column;
        gap: 15px;
    }

    .task-item {
        background: rgba(255, 255, 255, 0.1);
        border-radius: 12px;
        padding: 20px;
        border: 1px solid rgba(255, 255, 255, 0.2);
        display: flex;
        align-items: center;
        gap: 15px;
        transition: all 0.3s ease;
    }

    .task-item:hover {
        background: rgba(255, 255, 255, 0.15);
        transform: translateY(-2px);
    }

    .task-checkbox {
        width: 20px;
        height: 20px;
        cursor: pointer;
        border-radius: 4px;
    }

    .task-content {
        flex: 1;
    }

    .task-title {
        font-weight: 600;
        font-size: 1.1rem;
        margin-bottom: 5px;
    }

    .task-meta {
        display: flex;
        gap: 15px;
        font-size: 0.9rem;
        opacity: 0.8;
        flex-wrap: wrap;
    }

    .task-actions {
        display: flex;
        gap: 10px;
    }

    .task-actions .btn {
        padding: 8px 15px;
        font-size: 0.9rem;
    }

    .domain-tag {
        padding: 4px 12px;
        border-radius: 15px;
        font-size: 0.8rem;
        font-weight: 500;
    }

    .domain-academic { background: rgba(66, 133, 244, 0.3); }
    .domain-income { background: rgba(52, 168, 83, 0.3); }
    .domain-growth { background: rgba(251, 188, 4, 0.3); }
    .domain-life { background: rgba(234, 67, 53, 0.3); }

    .task-item.completed {
        opacity: 0.6;
    }

    .task-item.completed .task-title {
        text-decoration: line-through;
    }

    .task-item.in-progress {
        background: rgba(76, 175, 80, 0.1);
        border-color: rgba(76, 175, 80, 0.3);
    }

    .toast {
        position: fixed;
        bottom: 30px;
        right: 30px;
        background: rgba(0, 0, 0, 0.8);
        color: white;
        padding: 15px 25px;
        border-radius: 10px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        transform: translateY(100px);
        opacity: 0;
        transition: all 0.3s ease;
        z-index: 1000;
        backdrop-filter: blur(10px);
    }

    .toast.show {
        transform: translateY(0);
        opacity: 1;
    }

    .toast.success { background: rgba(76, 175, 80, 0.9); }
    .toast.error { background: rgba(244, 67, 54, 0.9); }
    .toast.info { background: rgba(33, 150, 243, 0.9); }

    .hidden { display: none !important; }

    .loading {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 15px;
        background: rgba(102, 126, 234, 0.1);
        border-radius: 10px;
        border: 1px solid rgba(102, 126, 234, 0.3);
        margin: 15px 0;
    }

    .spinner {
        width: 20px;
        height: 20px;
        border: 3px solid rgba(255, 255, 255, 0.3);
        border-top-color: white;
        border-radius: 50%;
        animation: spin 1s linear infinite;
    }

    @keyframes spin {
        to { transform: rotate(360deg); }
    }

    .empty-state {
        text-align: center;
        padding: 40px 20px;
        opacity: 0.7;
        font-style: italic;
    }

    /* å“åº”å¼è®¾è®¡ */
    @media (max-width: 768px) {
        body {
            padding: 15px;
        }
        
        .container {
            padding: 20px;
        }
        
        .header h1 {
            font-size: 2rem;
        }
        
        .stats {
            grid-template-columns: 1fr 1fr;
        }
        
        .button-group {
            flex-direction: column;
        }
        
        .btn {
            justify-content: center;
        }
        
        .task-item {
            flex-direction: column;
            align-items: flex-start;
        }
        
        .task-actions {
            width: 100%;
            justify-content: space-between;
        }
    }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ¯ ç”Ÿæ´»ç®¡ç†ç³»ç»Ÿ</h1>
            <p>v2.4 æœ€ç»ˆä¿®å¤ç‰ˆ - å®Œå…¨æ— ç¼“å­˜ç‰ˆæœ¬</p>
        </div>

        <div class="stats">
            <div class="stat-card">
                <div class="stat-number" id="totalTasks">3</div>
                <div class="stat-label">æ€»ä»»åŠ¡æ•°</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="completedTasks">1</div>
                <div class="stat-label">å·²å®Œæˆ</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="pendingTasks">2</div>
                <div class="stat-label">å¾…å¤„ç†</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="productivity">33%</div>
                <div class="stat-label">å®Œæˆç‡</div>
            </div>
        </div>

        <div class="section">
            <div class="section-title">
                âœ¨ AI æ™ºèƒ½ä»»åŠ¡å¤„ç†
            </div>
            <div class="input-group">
                <label>ä»»åŠ¡å†…å®¹ï¼ˆæ”¯æŒå¤šè¡Œè¾“å…¥æˆ–åˆ†å·åˆ†éš”ï¼‰:</label>
                <textarea id="aiInput" rows="4" placeholder="è¾“å…¥ä»»åŠ¡å†…å®¹ï¼Œä¾‹å¦‚ï¼š
å›å¤ Tony çš„é‚®ä»¶
ç ”ç©¶ OCR é”™è¯¯æ£€æµ‹æ–¹æ³•
æ•´ç†å‡ºå·®ç¥¨æ®ç»™é›ªåªš

æˆ–åˆ†å·åˆ†éš”ï¼šå›å¤é‚®ä»¶ï¼›æ•´ç†æ–‡æ¡£ï¼›å¼€ä¼šè®¨è®º"></textarea>
            </div>
            <div class="button-group">
                <button class="btn btn-primary" onclick="processAITasks()">
                    <span>âœ¨</span> AI æ™ºèƒ½å¤„ç†
                </button>
                <button class="btn btn-secondary" onclick="clearAIInput()">
                    æ¸…ç©º
                </button>
            </div>
            <div id="aiLoading" class="loading hidden">
                <div class="spinner"></div>
                <span>AI æ­£åœ¨åˆ†æå’Œåˆ†ç±»ä»»åŠ¡...</span>
            </div>
        </div>

        <div class="section">
            <div class="section-title">
                ğŸš€ å¿«é€Ÿæ·»åŠ ä»»åŠ¡
            </div>
            <div class="input-group">
                <input type="text" id="quickInput" placeholder="è¾“å…¥ä»»åŠ¡æ ‡é¢˜ï¼ˆæŒ‰Enterå¿«é€Ÿæ·»åŠ ï¼‰" onkeypress="if(event.key==='Enter'){addQuickTask();}">
            </div>
            <div class="button-group">
                <button class="btn btn-success" onclick="addQuickTask()">
                    <span>â•</span> ç«‹å³æ·»åŠ 
                </button>
            </div>
        </div>

        <div class="section">
            <div class="section-title">
                ğŸ“‹ ä»Šæ—¥ä»»åŠ¡åˆ—è¡¨
            </div>
            <div class="button-group">
                <button class="btn btn-primary" onclick="optimizeSchedule()">
                    <span>ğŸ§ </span> AI ä¼˜åŒ–æ’åº
                </button>
                <button class="btn btn-secondary" onclick="refreshTasks()">
                    <span>ğŸ”„</span> åˆ·æ–°
                </button>
                <button class="btn btn-danger" onclick="clearCompleted()">
                    <span>ğŸ—‘ï¸</span> æ¸…ç©ºå·²å®Œæˆ
                </button>
            </div>
            
            <div class="task-list" id="taskList">
                <!-- ä»»åŠ¡å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
            </div>
        </div>
    </div>

    <div id="toastContainer"></div>

    <script>
    // å®Œå…¨é™æ€æ¨¡å¼ - æ— ä»»ä½•å¤–éƒ¨ä¾èµ–
    let tasks = [
        {
            id: 1,
            title: "å›å¤ Tony çš„é‚®ä»¶",
            domain: "academic",
            status: "pending",
            estimatedHours: 0.5,
            plannedTime: "09:00",
            createdAt: new Date().toISOString()
        },
        {
            id: 2,
            title: "ç ”ç©¶ OCR é”™è¯¯æ£€æµ‹æ–¹æ³•",
            domain: "academic", 
            status: "in_progress",
            estimatedHours: 2,
            plannedTime: "10:00",
            createdAt: new Date().toISOString()
        },
        {
            id: 3,
            title: "æ•´ç†å‡ºå·®ç¥¨æ®ç»™é›ªåªš",
            domain: "life",
            status: "completed",
            estimatedHours: 0.25,
            plannedTime: "14:00",
            createdAt: new Date().toISOString(),
            completedAt: new Date().toISOString()
        }
    ];

    let nextTaskId = 4;

    // åŸŸåæ˜ å°„
    const domainMap = {
        academic: { name: 'å­¦æœ¯', color: 'academic' },
        income: { name: 'æ”¶å…¥', color: 'income' },
        growth: { name: 'æˆé•¿', color: 'growth' },
        life: { name: 'ç”Ÿæ´»', color: 'life' }
    };

    // Toast æç¤ºå‡½æ•°
    function showToast(message, type = 'info') {
        const toast = document.createElement('div');
        toast.className = `toast ${type}`;
        toast.textContent = message;
        
        document.getElementById('toastContainer').appendChild(toast);
        
        setTimeout(() => toast.classList.add('show'), 100);
        
        setTimeout(() => {
            toast.classList.remove('show');
            setTimeout(() => toast.remove(), 300);
        }, 3000);
    }

    // AI å¤„ç†ä»»åŠ¡
    function processAITasks() {
        const input = document.getElementById('aiInput');
        const text = input.value.trim();
        
        if (!text) {
            showToast('è¯·è¾“å…¥ä»»åŠ¡å†…å®¹', 'error');
            return;
        }

        document.getElementById('aiLoading').classList.remove('hidden');
        
        setTimeout(() => {
            const taskTexts = text.includes(';') ? 
                text.split(';').map(t => t.trim()).filter(t => t) :
                text.split('\n').map(t => t.trim()).filter(t => t);
            
            taskTexts.forEach(taskText => {
                const newTask = {
                    id: nextTaskId++,
                    title: taskText,
                    domain: inferDomain(taskText),
                    status: "pending",
                    estimatedHours: inferHours(taskText),
                    plannedTime: inferTime(),
                    createdAt: new Date().toISOString()
                };
                
                tasks.push(newTask);
            });
            
            document.getElementById('aiLoading').classList.add('hidden');
            input.value = '';
            refreshTasks();
            showToast(`AI æˆåŠŸå¤„ç† ${taskTexts.length} ä¸ªä»»åŠ¡`, 'success');
        }, 2000);
    }

    // æ¨æ–­ä»»åŠ¡åŸŸ
    function inferDomain(text) {
        const keywords = {
            academic: ['ç ”ç©¶', 'è®ºæ–‡', 'å­¦ä¹ ', 'é‚®ä»¶', 'ä¼šè®®', 'åˆ†æ'],
            income: ['å·¥ä½œ', 'é¡¹ç›®', 'å®¢æˆ·', 'æ”¶å…¥', 'ä¸šåŠ¡'],
            growth: ['æŠ€èƒ½', 'åŸ¹è®­', 'è¯¾ç¨‹', 'å­¦ä¹ '],
            life: ['ç¥¨æ®', 'æ•´ç†', 'ç”Ÿæ´»', 'å®¶åŠ¡', 'è´­ç‰©']
        };
        
        for (const [domain, words] of Object.entries(keywords)) {
            if (words.some(word => text.includes(word))) {
                return domain;
            }
        }
        return 'academic';
    }

    // æ¨æ–­æ—¶é—´
    function inferHours(text) {
        if (text.includes('30åˆ†é’Ÿ')) return 0.5;
        if (text.includes('1å°æ—¶')) return 1;
        if (text.includes('2å°æ—¶')) return 2;
        return 1;
    }

    // æ¨æ–­å¼€å§‹æ—¶é—´
    function inferTime() {
        const hour = new Date().getHours();
        if (hour < 12) return '10:00';
        if (hour < 14) return '14:00';
        if (hour < 17) return '15:00';
        return '19:00';
    }

    // æ¸…ç©ºAIè¾“å…¥
    function clearAIInput() {
        document.getElementById('aiInput').value = '';
    }

    // å¿«é€Ÿæ·»åŠ ä»»åŠ¡
    function addQuickTask() {
        const input = document.getElementById('quickInput');
        const title = input.value.trim();
        
        if (!title) {
            showToast('è¯·è¾“å…¥ä»»åŠ¡æ ‡é¢˜', 'error');
            return;
        }
        
        const newTask = {
            id: nextTaskId++,
            title: title,
            domain: 'academic',
            status: 'pending',
            estimatedHours: 1,
            plannedTime: inferTime(),
            createdAt: new Date().toISOString()
        };
        
        tasks.push(newTask);
        input.value = '';
        refreshTasks();
        showToast('ä»»åŠ¡æ·»åŠ æˆåŠŸ', 'success');
    }

    // åˆ‡æ¢ä»»åŠ¡çŠ¶æ€
    function toggleTask(taskId) {
        const task = tasks.find(t => t.id === taskId);
        if (!task) return;
        
        if (task.status === 'completed') {
            task.status = 'pending';
            task.completedAt = null;
            showToast('ä»»åŠ¡æ ‡è®°ä¸ºæœªå®Œæˆ', 'info');
        } else {
            task.status = 'completed';
            task.completedAt = new Date().toISOString();
            showToast('âœ… ä»»åŠ¡å·²å®Œæˆï¼', 'success');
        }
        
        refreshTasks();
    }

    // å¼€å§‹ä»»åŠ¡
    function startTask(taskId) {
        const task = tasks.find(t => t.id === taskId);
        if (!task) return;
        
        task.status = 'in_progress';
        showToast(`å¼€å§‹æ‰§è¡Œ: ${task.title}`, 'success');
        refreshTasks();
    }

    // æš‚åœä»»åŠ¡
    function pauseTask(taskId) {
        const task = tasks.find(t => t.id === taskId);
        if (!task) return;
        
        task.status = 'pending';
        showToast(`æš‚åœä»»åŠ¡: ${task.title}`, 'info');
        refreshTasks();
    }

    // åˆ é™¤ä»»åŠ¡
    function deleteTask(taskId) {
        if (!confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªä»»åŠ¡å—ï¼Ÿ')) return;
        
        tasks = tasks.filter(t => t.id !== taskId);
        refreshTasks();
        showToast('ä»»åŠ¡å·²åˆ é™¤', 'info');
    }

    // ä¼˜åŒ–æ—¥ç¨‹
    function optimizeSchedule() {
        showToast('AI æ­£åœ¨ä¼˜åŒ–æ‚¨çš„ä»»åŠ¡æ’åº...', 'info');
        
        setTimeout(() => {
            // ç®€å•çš„ä¼˜åŒ–é€»è¾‘ï¼šæŒ‰ä¼˜å…ˆçº§å’Œæ—¶é—´æ’åº
            tasks.sort((a, b) => {
                if (a.status === 'in_progress' && b.status !== 'in_progress') return -1;
                if (b.status === 'in_progress' && a.status !== 'in_progress') return 1;
                if (a.status === 'completed' && b.status !== 'completed') return 1;
                if (b.status === 'completed' && a.status !== 'completed') return -1;
                return a.estimatedHours - b.estimatedHours;
            });
            
            refreshTasks();
            showToast('âœ¨ ä»»åŠ¡æ’åºä¼˜åŒ–å®Œæˆ', 'success');
        }, 1500);
    }

    // æ¸…ç©ºå·²å®Œæˆä»»åŠ¡
    function clearCompleted() {
        const completedCount = tasks.filter(t => t.status === 'completed').length;
        
        if (completedCount === 0) {
            showToast('æ²¡æœ‰å·²å®Œæˆçš„ä»»åŠ¡', 'info');
            return;
        }
        
        if (!confirm(`ç¡®å®šè¦æ¸…ç©º ${completedCount} ä¸ªå·²å®Œæˆä»»åŠ¡å—ï¼Ÿ`)) return;
        
        tasks = tasks.filter(t => t.status !== 'completed');
        refreshTasks();
        showToast(`å·²æ¸…ç©º ${completedCount} ä¸ªå·²å®Œæˆä»»åŠ¡`, 'success');
    }

    // åˆ·æ–°ä»»åŠ¡åˆ—è¡¨
    function refreshTasks() {
        updateStats();
        renderTasks();
    }

    // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
    function updateStats() {
        const total = tasks.length;
        const completed = tasks.filter(t => t.status === 'completed').length;
        const pending = tasks.filter(t => t.status !== 'completed').length;
        const productivity = total > 0 ? Math.round((completed / total) * 100) : 0;
        
        document.getElementById('totalTasks').textContent = total;
        document.getElementById('completedTasks').textContent = completed;
        document.getElementById('pendingTasks').textContent = pending;
        document.getElementById('productivity').textContent = productivity + '%';
    }

    // æ¸²æŸ“ä»»åŠ¡åˆ—è¡¨
    function renderTasks() {
        const container = document.getElementById('taskList');
        
        if (tasks.length === 0) {
            container.innerHTML = '<div class="empty-state">è¿˜æ²¡æœ‰ä»»åŠ¡ï¼Œå¼€å§‹æ·»åŠ ä¸€äº›ä»»åŠ¡å§ï¼</div>';
            return;
        }
        
        container.innerHTML = tasks.map(task => {
            const domain = domainMap[task.domain];
            return `
                <div class="task-item ${task.status}">
                    <input type="checkbox" class="task-checkbox" 
                           ${task.status === 'completed' ? 'checked' : ''} 
                           onchange="toggleTask(${task.id})">
                    <div class="task-content">
                        <div class="task-title">${task.title}</div>
                        <div class="task-meta">
                            <span class="domain-tag domain-${domain.color}">${domain.name}</span>
                            <span>é¢„è®¡ ${task.estimatedHours}å°æ—¶</span>
                            <span>è®¡åˆ’ ${task.plannedTime}</span>
                            ${task.status === 'completed' ? '<span>âœ… å·²å®Œæˆ</span>' : ''}
                        </div>
                    </div>
                    <div class="task-actions">
                        ${task.status === 'pending' ? `
                            <button class="btn btn-success" onclick="startTask(${task.id})">
                                <span>â–¶ï¸</span> å¼€å§‹
                            </button>
                        ` : ''}
                        ${task.status === 'in_progress' ? `
                            <button class="btn btn-secondary" onclick="pauseTask(${task.id})">
                                <span>â¸ï¸</span> æš‚åœ
                            </button>
                        ` : ''}
                        <button class="btn btn-danger" onclick="deleteTask(${task.id})">
                            <span>ğŸ—‘ï¸</span>
                        </button>
                    </div>
                </div>
            `;
        }).join('');
    }

    // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
    document.addEventListener('DOMContentLoaded', function() {
        refreshTasks();
        showToast('ğŸ¯ ç”Ÿæ´»ç®¡ç†ç³»ç»Ÿå·²åŠ è½½ - æ— ç¼“å­˜ç‰ˆæœ¬', 'success');
    });
    </script>
</body>
</html>